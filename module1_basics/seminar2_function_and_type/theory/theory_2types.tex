\documentclass[10pt]{article}
\usepackage[english,russian]{babel}
\usepackage{textcomp}
\usepackage[left=2cm, right=2cm, top=1.5cm, bottom=1.5cm]{geometry}
\usepackage{tikz}
\usepackage{multicol}
\usepackage{hyperref}
\usepackage{amsmath}
\usepackage{listings}
\usepackage{colortbl}
\usepackage{graphicx}
\usepackage[shortlabels]{enumitem}
\usepackage{hyperref}
\pagenumbering{gobble}

\lstdefinestyle{CStyle}{
  language=C,
  basicstyle=\linespread{1.1}\ttfamily,
  basewidth=0.5em,
  texcl=true,
  keywordstyle=\color{blue}\bfseries,
  commentstyle=\color{gray},
  stringstyle=\ttfamily\color{orange!50!black},
  showstringspaces=false,
  backgroundcolor=\color{white},
  breaklines=true,
  breakatwhitespace=true,
  xleftmargin=5mm,
  keepspaces = true,
  extendedchars=\true,
  tabsize=4,
  upquote=true,
  emph={size_t, NULL},
  emphstyle={\color{blue}\bfseries},
  literate={~}{{\raisebox{0.5ex}{\texttildelow}}}{1},
}
\lstdefinestyle{boxStyle}{
  style=CStyle,
  framexleftmargin=5mm, 
  frame=shadowbox, 
  rulesepcolor=\color{gray}
}
\lstset{style=CStyle}


\begin{document}
\title{Семинар \#2: Часть 2: Типы данных. \vspace{-5ex}}\date{}\maketitle
\section*{Часть 1: Целочисленные типы данных.}
В данной таблице приведены стандартные размеры целочисленных типов. Важно помнить, что за исключением типов \texttt{char} и \texttt{unsigned char} (размер которых гарантированно равен 1 байту), размеры остальных типов могут варьироваться в зависимости от архитектуры системы и компилятора.
\begin{center}
\begin{tabular}{ c c c c }
 тип & размер (байт) & диапазон значений ($2^{\# bits}$) & спецификатор \\ \hline
 \texttt{char} & 1 & от -128 до 127 & \texttt{\%hhi} \\ 
 \texttt{short} & 2 & от -32768 до 32767 & \texttt{\%hi}  \\  
 \texttt{int} & 4 & примерно от -2-х миллиардов до 2-х миллиардов & \texttt{\%i}  \\  
 \texttt{long} & 4 & примерно от -2-х миллиардов до 2-х миллиардов & \texttt{\%li}  \\  
 \texttt{long long} & 8 & примерно от $-10^{19}$ до $10^{19}$ & \texttt{\%lli}  \\  
 \texttt{unsigned char} & 1 & от 0 до 255 & \texttt{\%hhu} \\ 
 \texttt{unsigned short} & 2 & от 0 до 65535 & \texttt{\%hu}  \\  
 \texttt{unsigned int} & 4 & от 0 до $2^{32} \approx 4*10^{9}$ & \texttt{\%u}  \\  
 \texttt{unsigned long} & 4 & от 0 до $2^{32} \approx 4*10^{9}$ & \texttt{\%lu}  \\  
 \texttt{unsigned long long} & 8 & от 0 до $2^{64} \approx 2*10^{19}$  & \texttt{\%llu}  \\  
 \texttt{size\_t} & 8 & от 0 до $2^{64} \approx 2*10^{19}$ & \texttt{\%zu} \\ \hline
\end{tabular}
\end{center}
Это наиболее распространённые значения размеров типов для 64-х битных систем, но на некоторых системах эти значения могут быть другими.
Чтобы узнать эти размер типов на вашей системе используйте оператор \texttt{sizeof}. 
\begin{lstlisting}
int a = 10;
printf("%zu\n", sizeof(a));    // скорей всего напечатает 4
printf("%zu\n", sizeof(int));  // скорей всего напечатает 4
\end{lstlisting}

\section*{Часть 2: Новое имя типа}
В языке C существует возможность вводить новое имя для уже существующего типа с помощью ключевого слова \texttt{typedef}. Чтобы ввести новое имя для типа нужно написать следующее:
\begin{lstlisting}
typedef староеимя новоеимя;
\end{lstlisting}
После этого для типа можно будет использовать и новое и старое имя.


\subsection*{Тип \texttt{size\_t}} 
Тип \texttt{size\_t} -- это беззнаковый тип целых чисел, который выбирается таким образом, чтобы он вмещал размер любого массива. Внутри стандартной библиотеки может быть написано примерно следующее:
\begin{lstlisting}
typedef unsigned long long size_t;
\end{lstlisting}
Но размер типа \texttt{size\_t} может различаться в зависимости от вычислительно системы. Выясните чему он равен на вашей системе.

\newpage
\section*{Часть 3: Числа с плавающей точкой. Библиотека \texttt{math.h}}
\begin{center}
\begin{tabular}{ c c c c c }
 тип & размер (байт) & значимые цифры & диапазон экспоненты & спецификатор \\ \hline
 float             & 4          & 6  & от -38 до 38    & \texttt{\%f} \\ 
 double            & 8          & 15 & от -308 до 308  & \texttt{\%lf}  \\  
 long double       & от 8 до 16 & $\ge 15$  & не хуже чем у double  & \texttt{\%Lf}  \\ \hline
 печать 3-х чисел после запятой & -          & -  & -              & \texttt{\%.3f} \\
 печать без нулей на конце & -          & -  & -              & \texttt{\%g} \\
 печать в научной записи   & -          & -  & -              & \texttt{\%e} \\
\end{tabular}
\end{center}


\subsection*{Библиотека \texttt{math.h}}
В библиотеке \texttt{math.h} содержатся множество полезных математических функций.

\begin{center}
\begin{tabular}{ c c }
 функция & что делает \\ \hline
 \texttt{sqrt}     & Вычисляет корень числа \\ 
 \texttt{abs}      & Вычисляет модуль целого числа \\ 
 \texttt{fabs}     & Вычисляет модуль числа с плавающей точкой \\ 
 \texttt{exp}      & Экспонента $e^x$ \\ 
 \texttt{log}      & Натуральный логарифм $ln(x)$ \\
 \texttt{sin}, \texttt{cos},  \texttt{tan} & Синус, косинус и тангенс (радианы) \\ 
 \texttt{asin}, \texttt{acos},  \texttt{atan} & Арксинус, арккосинус и арктангенс \\ 
 \texttt{floor}      & Округление до ближайшего меньшего целого числа \\
 \texttt{ceil}       & Округление до ближайшего большего целого числа \\
 \texttt{pow(x, y)}        & Возведение числа в \texttt{x} степень \texttt{y} \\
\end{tabular}
\end{center}


\subsection*{Точность чисел с плавающей точкой}
Количество вещественных чисел на любом отрезке бесконечно, а количество возможных значений чисел с плавающей точкой ограничено, поэтому не каждое вещественное число можно закодировать числом \texttt{float} или \texttt{double}. Это означает, что числа с плавающей точкой всегда вычисляются с погрешностью. Поэтому сравнивать 2 таких числа оператором сравнения \texttt{==} очень опасно. Следующая программа напечатает \texttt{No}.
\begin{lstlisting}
#include <stdio.h>
int main() 
{
    float a = 3 * 0.1;
    float b = 0.3;
    if (a == b)
        printf("Yes\n");
    else
        printf("No\n");
}
\end{lstlisting}
Такие числа всегда нужно сравнивать с некоторой точностью $\epsilon$ по формуле $|a - b| < \epsilon$. Вот так:\\ 
\begin{lstlisting}
#include <stdio.h>
#include <math.h>
int main() 
{
    float eps = 1e-5;
    float a = 3 * 0.1;
    float b = 0.3;
    if (fabs(a - b) < eps)
        printf("Yes\n");
    else
        printf("No\n");
}
\end{lstlisting}

\end{document}