\documentclass{article}
\usepackage[utf8x]{inputenc}
\usepackage{ucs}
\usepackage{amsmath} 
\usepackage{amsfonts}
\usepackage{upgreek}
\usepackage[english,russian]{babel}
\usepackage{graphicx}
\usepackage{float}
\usepackage{textcomp}
\usepackage{hyperref}
\usepackage{geometry}
  \geometry{left=2cm}
  \geometry{right=1.5cm}
  \geometry{top=1cm}
  \geometry{bottom=2cm}
\usepackage{tikz}
\usepackage{ccaption}
\usepackage{multicol}

\usepackage{listings}


\begin{document}
\pagenumbering{gobble}

\lstset{
  language=C,                % choose the language of the code
  basicstyle=\linespread{1.1}\ttfamily,
  columns=fixed,
  fontadjust=true,
  basewidth=0.5em,
  keywordstyle=\color{blue}\bfseries,
  commentstyle=\color{gray},
  stringstyle=\ttfamily\color{orange!50!black},
  showstringspaces=false,
  %numbers=false,                   % where to put the line-numbers
  numbersep=5pt,
  numberstyle=\tiny\color{black},
  numberfirstline=true,
  stepnumber=1,                   % the step between two line-numbers.        
  numbersep=10pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
  showstringspaces=false,         % underline spaces within strings
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=true,         % sets if automatic breaks should only happen at whitespace
  xleftmargin=.2in,
  extendedchars=\true,
  keepspaces = true,
  frame=tlbr,
  framesep=8pt,
  framerule=0pt,
  xleftmargin=.10\textwidth, 
  xrightmargin=.0\textwidth,
  }
\lstset{literate=%
   *{0}{{{\color{red!20!violet}0}}}1
    {1}{{{\color{red!20!violet}1}}}1
    {2}{{{\color{red!20!violet}2}}}1
    {3}{{{\color{red!20!violet}3}}}1
    {4}{{{\color{red!20!violet}4}}}1
    {5}{{{\color{red!20!violet}5}}}1
    {6}{{{\color{red!20!violet}6}}}1
    {7}{{{\color{red!20!violet}7}}}1
    {8}{{{\color{red!20!violet}8}}}1
    {9}{{{\color{red!20!violet}9}}}1
}

\renewcommand{\thesubsection}{\arabic{subsection}}
\makeatletter
\def\@seccntformat#1{\@ifundefined{#1@cntformat}%
   {\csname the#1\endcsname\quad}%    default
   {\csname #1@cntformat\endcsname}}% enable individual control
\newcommand\section@cntformat{}     % section level 
\newcommand\subsection@cntformat{Задача \thesubsection.\space} % subsection level
\newcommand\subsubsection@cntformat{\thesubsubsection.\space} % subsubsection level
\makeatother


\definecolor{solcolor}{RGB}{226,240,245}

\title{Семинар \#2: Часть 1: Функции. Домашнее задание. \vspace{-5ex}}\date{}\maketitle
\subsection{Куб}
Напишите функцию \texttt{cube}, которая будет принимать на вход одно целое число и возвращать куб этого числа. Вызовите эту функцию в функции \texttt{main} следующим образом:
\begin{lstlisting}
#include <stdio.h>

// Тут вам нужно написать
// функцию cube

int main()
{
    printf("%i\n", cube(5));
}
\end{lstlisting}

После того как вы напишите функцию \texttt{cube}, скомпилируйте данную программу и запустите она должна напечатать на экран число \texttt{125}.


\subsection{Четность}
Напишите функцию \texttt{is\_even}, которая будет принимать на вход одно целое число и возвращать \texttt{1}, если это число чётное и \texttt{0}, если число нечётное. Вызовите эту функцию в функции \texttt{main} следующим образом:
\begin{lstlisting}
#include <stdio.h>

// Тут вам нужно написать
// функцию is_even

int main()
{
    printf("%i\n", is_even(90));
    printf("%i\n", is_even(91));
}
\end{lstlisting}
После того как вы напишите функцию \texttt{is\_even}, скомпилируйте данную программу и запустите она должна напечатать на экран:
\begin{verbatim}
1
0
\end{verbatim}

\subsection{Печать чётных чисел}
Напишите функцию \texttt{print\_even}, которая будет принимать на вход два целых числа \texttt{a} и \texttt{b} и печатать на экран все чётные числа, которые находятся на отрезке \texttt{[a, b]}.

\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{print\_even} & печать на экран \\ \hline
 \texttt{2 15} & \texttt{2 4 6 8 10 12 14}  \\
 \texttt{1 15} & \texttt{2 4 6 8 10 12 14}  \\  
 \texttt{-7 3} & \texttt{-6 -4 -2 0 2}  \\
\end{tabular}
\end{center}

\newpage


\subsection{Сумма цифр числа}
\begin{itemize}
\item Напишите функцию \texttt{sum\_of\_digits}, которая будет принимать на вход целое число и возвращать сумму всех цифр числа (в десятичной записи). Предполагайте, что на вход функции всегда будут приходить неотрицательные числа. Реализуйте эту функцию с помощью цикла.

\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{sum\_of\_digits} & выход функции \texttt{sum\_of\_digits} \\ \hline
 \texttt{123} & \texttt{6}  \\
 \texttt{55955} & \texttt{29}  \\  
 \texttt{4} & \texttt{4}  \\
 \texttt{0} & \texttt{0}  \\
\end{tabular}
\end{center}

\item Напишите функцию \texttt{sum\_of\_digits\_rec}, которая будет принимать на вход целое число и возвращать сумму всех цифр числа (в десятичной записи). Предполагайте, что на вход функции всегда будут приходить неотрицательные числа. Реализуйте эту функцию с помощью рекурсии. Пользоваться уже написаной с помощью цикла функцией \texttt{sum\_of\_digits} в этой функции нельзя.
 \end{itemize}
 
 
\subsection{Бинарное представление числа}
Напишите функцию \texttt{print\_binary}, которая будет принимать на вход целое число и печатать на экран бинарное представление этого числа. Предполагайте, что на вход функции всегда будут приходить неотрицательные числа.
Реализуйте эту функцию с помощью рекурсии.
 
\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{print\_binary} & печать на экран \\ \hline
 \texttt{6} & \texttt{110}  \\
 \texttt{128} & \texttt{10000000}  \\  
 \texttt{4823564} & \texttt{10010011001101000001100}  \\
 \texttt{0} & \texttt{0}  \\
\end{tabular}
\end{center} 
 
 
\subsection{Числа трибоначчи}
Числа трибоначчи - это последовательность чисел, задаваемые следующим образом:
\begin{verbatim}
trib(0) = 0; 
trib(1) = 0; 
trib(2) = 1;
trib(n) = trib(n - 3) + trib(n - 2) + trib(n - 1);
\end{verbatim}
Напишите функцию, \texttt{trib}, которая будет принимать на вход целое число \texttt{n} и будет возвращать \texttt{n}-е число трибоначчи. Убедитесь, что функция работает быстро при вычислении 38-го числа трибоначчи.

\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{trib} & выход функции \texttt{trib} \\ \hline
 \texttt{1} & \texttt{0}  \\
 \texttt{5} & \texttt{4}  \\
 \texttt{20} & \texttt{35890}  \\
 \texttt{35} & \texttt{334745777}  \\
 \texttt{38} & \texttt{2082876103}  \\
\end{tabular}
\end{center} 
 
 
\subsection{Количество чётных}
Напишите функцию \texttt{count\_even}, которая будет принимать на вход массив целых чисел и количество элементов этого массива. Эта функция должна возвращать количество чётных чисел в этом массиве. Протестируйте эту функцию в функции \texttt{main}.
\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{count\_even} & выход функции \texttt{count\_even} \\ \hline
 \texttt{array: 1 2 3 4 5} & \texttt{2} \\
 \texttt{size: 5} & \\ \hline
 \texttt{array: 10 20 30 40} & \texttt{4} \\
 \texttt{size: 4} & \\ \hline
 \texttt{array: 10 1} & \texttt{1} \\
 \texttt{size: 2} & \\
\end{tabular}
\end{center} 
 




\subsection{Обратный массив}
Напишите функцию \texttt{reverse}, которая будет принимать на вход массив целых чисел и количество элементов этого массива. Эта функция должна переворачивать массив задом наперёд. Протестируйте эту функцию в функции \texttt{main}.
\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{reverse} & массив после выполнения \texttt{reverse} \\ \hline
 \texttt{array: 10 20 30 40 50} & \texttt{50 40 30 20 10} \\
 \texttt{size: 5} & \\ \hline
 \texttt{array: 60 20 80 10} & \texttt{10 80 20 60} \\
 \texttt{size: 4} & \\
\end{tabular}
\end{center} 




\subsection{Необычная рекурсия}
Алиса и Боб играют в игру. Сначала Алиса получает некоторое нечётное число. Алиса умножает это число на 3 и прибавляет к результату умножения единицу. Получившиеся число Алиса печатает на экран и передаёт Бобу. Боб получает чётное число и делит это число на 2 пока число не станет нечётным. После каждого деления на 2, Боб печатает число на экран. Как только Боб получит нечётное число, отличное от 1, он передаёт её Алисе. Но если Боб получит число 1, то программа заканчивает выполнение.

Например, если мы передадим на вход программе число 13, то она должна напечатать следующее:

\begin{verbatim}
Alice:  40
Bob:    20
Bob:    10
Bob:    5
Alice:  16
Bob:    8
Bob:    4
Bob:    2
Bob:    1
\end{verbatim}

Эту программу очень просто написать с помощью обычного цикла. Но ваша задача заключается в том, чтобы написать её с помощью рекурсии, причём поведение Алисы и Боба должны описываться двумя разными функциями. Напишите следующие функции:

\begin{itemize}
\item \texttt{void alice(int n)}
\item \texttt{void bob(int n)}
\end{itemize}

Эти функции должны изменять приходящее на вход число, печатать его на экран и передавать новое число другой функции. То есть функция \texttt{alice} должна вызывать функцию \texttt{bob}, а функция \texttt{bob} должна вызывать функцию \texttt{alice} (но только если новое нечётное число будет отлично от единицы).

\subsection{Транспонирование}
Написать функцию \texttt{void transpose(float A[MAX][MAX], int n)}, которая будет принимать на вход матрицу \texttt{A} размера $n$ на $n$ и транспонировать её. Также напишите вспомогательную функцию \texttt{print(float A[MAX][MAX], int n)} для печати матрицы на экран. Считайте матрицу из файла \texttt{files/matA.txt} с помощью перенаправления потока, транспонируйте её, а результат запишите в новый файл \texttt{result.txt}.\\


\newpage
\section{Необязательные задачи}

\subsection{Треугольник из звёздочек}
Напищите функцию \texttt{triangle}, которая будет принимать на вход одно целое положительно число \texttt{n} и будет печатать на экран прямоугольный треугольник из звёздочек (символов \texttt{*}). В функции \texttt{main} считайте с экраная число и вызовите функцию \texttt{triangle}, передав ей считанное число.

\begin{center}
\begin{tabular}{ l | l }
 вход & выход \\ \hline
 \texttt{5} & \texttt{*}  \\  
            & \texttt{**} \\ 
            & \texttt{***} \\ 
            & \texttt{****} \\
            & \texttt{*****} \\ \hline
 \texttt{3} & \texttt{*}  \\  
            & \texttt{**} \\  
            & \texttt{***} \\ \hline
 \texttt{1} & \texttt{*}  \\
\end{tabular}
\end{center}

\subsection{Оставить последнюю цифру}
Напишите функцию \texttt{last\_digits}, которая будет принимать на вход массив целых чисел и количество элементов этого массива. Эта функция должна заменять каждый элемент массива на его последнюю цифру (в десятичной записи числа). Протестируйте эту функцию в функции \texttt{main}.

\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{last\_digits} & массив после выполнения \texttt{last\_digits} \\ \hline
 \texttt{array: 12 61 426 17 115} & \texttt{2 1 6 7 5} \\
 \texttt{size: 5} & \\ \hline
 \texttt{array: 5 10} & \texttt{5 0} \\
 \texttt{size: 2} & \\
\end{tabular}
\end{center} 

\subsection{Факториалы}
Напишите функцию \texttt{factorials}, которая будет принимать на вход массив целых чисел и количество элементов этого массива. Эта функция должна заменять каждый элемент этого массива на его факториал. Напишите вспомогательную функцию \texttt{fact}, которая будет принимать одно целое число и возвращать факториал этого числа. Протестируйте эту функцию в функции \texttt{main}.
\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{factorials} & массив после выполнения \texttt{factorials} \\ \hline
 \texttt{array: 3 4 5 6 7} & \texttt{6 24 120 720 5040} \\
 \texttt{size: 5} & \\ \hline
 \texttt{array: 10 11 12} & \texttt{3628800 39916800 479001600} \\
 \texttt{size: 3} & \\
\end{tabular}
\end{center} 

\subsection{Сортировка}
Напишите функцию \texttt{sort}, которая будет принимать на вход массив целых чисел и количество элементов этого массива. Эта функция должна сортировать все элементы массива по убыванию. Протестируйте эту функцию в функции \texttt{main}.
\begin{center}
\begin{tabular}{ l | l }
 вход функции \texttt{sort} & массив после выполнения \texttt{sort} \\ \hline
 \texttt{array: 70 20 80 30 50 40 10 60} & \texttt{80 70 60 50 40 30 20 10} \\
 \texttt{size: 8} & \\ \hline
 \texttt{array: 60 20 80 10} & \texttt{80 60 20 10} \\
 \texttt{size: 4} & \\
\end{tabular}
\end{center} 


\subsection{Присвоение матриц}
Написать функцию \texttt{void assign(float A[MAX][MAX], float B[MAX][MAX], int n)}, которая присваивает элементам матрицы A соответствующие элементы матрицы \texttt{B} (\texttt{A = B}). Где \texttt{MAX} это \texttt{\#define}-константа.


\subsection{Умножение матриц}
Написать функцию \texttt{void multiply(float A[MAX][MAX], float B[MAX][MAX], float C[MAX][MAX], int n)}, которая перемножает матрицы \texttt{A} и \texttt{B} размера $n$ на $n$ (строка на столбец), а результат записывает в матрицу \texttt{C}. Формула: $C_{ij} = \sum\limits_k A_{ik} \cdot B_{kj}$. \\
Проверьте ваш код на следующих тестах:

\begin{center}
$\begin{pmatrix}
7 & 7 & 2 \\
1 & 8 & 3 \\
2 & 1 & 6 \\
\end{pmatrix} \cdot 
\begin{pmatrix}
5 & 2 & 9 \\
-4 & 2 & 11 \\
7 & 1 & -5 \\
\end{pmatrix}=
\begin{pmatrix}
21 & 30 & 130 \\
-6 & 21 & 82 \\
48 & 12 & -1 \\
\end{pmatrix}
$
\end{center}

\begin{center}

$
\begin{pmatrix}
5 & 2 & 9 \\
-4 & 2 & 11 \\
7 & 1 & -5 \\
\end{pmatrix}  \cdot 
\begin{pmatrix}
7 & 7 & 2 \\
1 & 8 & 3 \\
2 & 1 & 6 \\
\end{pmatrix}
=
\begin{pmatrix}
55 & 60 & 70 \\
-4 & -1 & 64 \\
40 & 52 & -13 \\
\end{pmatrix}
$
\end{center}

\begin{center}

$
\begin{pmatrix}
7 & 7 & 2 \\
1 & 8 & 3 \\
2 & 1 & 6 \\
\end{pmatrix}  \cdot 
\begin{pmatrix}
0 & 0 & 1 \\
0 & 1 & 0 \\
1 & 0 & 0 \\
\end{pmatrix}
=
\begin{pmatrix}
2 & 7 & 7 \\
3 & 8 & 1 \\
6 & 1 & 2 \\
\end{pmatrix}
$
\end{center}
В файлах \texttt{matA.txt} и \texttt{matB.txt} лежат матрицы 10 на 10. Считайте эти матрицы с помощью метода перенаправления потока из файла \texttt{combinedAB.txt}, перемножьте (A на B) и запишите результат в другой файл. В результате должно получиться:
\begin{center}
$
\begin{pmatrix}
259 & -15 & 237 & 257 &  231 &  67  & 237  & -64  & 152  & 363 \\
555 & 233 & 539 & 188 &  356 &  325 &  423 &  -47 &  123 &  387 \\
497 & 512 & 572 & 95  & 619  & 155  & 414  & 207  & 203  & 217 \\
455 & 280 & 675 & 354 &  664 &  346 &  483 &  177 &  168 &  404 \\
264 & 182 & 272 & 290 &  474 &  -33 &  234 &  99  & 379  & 156 \\
272 & 180 & 469 & 286 &  326 &  282 &  325 &  215 &  195 &  231 \\
421 & 363 & 475 & 506 &  359 &  481 &  468 &  101 &  325 &  328 \\
384 & 218 & 567 & 395 &  475 &  488 &  361 &  168 &  291 &  298 \\
387 & 297 & 480 & 170 &  318 &  423 &  483 &  10  & -17  & 406 \\
193 & 241 & 486 & 38  & 403  & 146  & 286  & 326  & 212  & 172 \\
\end{pmatrix}
$
\end{center}


\subsection{Матрица в степени}
Написать функцию \texttt{void power(int A[MAX][MAX], int C[MAX][MAX], int n, int k)}, которая вычисляет $A^k$, т.е. возводит матрицу $A$ размера $n$ на $n$ в $k$-ю степень, а результат записывает в матрицу C. Используйте функции \texttt{multiply} и \texttt{assign}. Псевдокод простейшей реализации такой функции:
\begin{lstlisting}
float B[MAX][MAX]

B = A   // конечно нельзя приравнивать массивы, но можно 
C = A   // использовать вашу функцию assign

for ( k - 1 раз )
{
	C = A*B
	B = C
}
\end{lstlisting}
Проверьте ваш код на следующих тестах:
\begin{center}

$
\begin{pmatrix}
7 & 7 & 2 \\
1 & 8 & 3 \\
2 & 1 & 6 \\
\end{pmatrix}^4 = 
\begin{pmatrix}
7116 & 15654 & 9549 \\
4002 & 8955 & 6135 \\
3369 & 6165 & 4350 \\
\end{pmatrix}
$
\end{center}



\begin{center}
$
\begin{pmatrix}
0 & 1 & 0 \\
1 & 0 & 1 \\
1 & 0 & 0 \\
\end{pmatrix}^{70} = 
\begin{pmatrix}
145547525 & 109870576 & 82938844 \\
192809420 & 145547525 & 109870576 \\
109870576 & 82938844 & 62608681 \\
\end{pmatrix}
$
\end{center}

\begin{center}
$
\begin{pmatrix}
0 & 1 & 0 \\
0 & 0 & 1 \\
1 & 0 & 0 \\
\end{pmatrix}^{1000} = 
\begin{pmatrix}
0 & 1 & 0 \\
0 & 0 & 1 \\
1 & 0 & 0 \\
\end{pmatrix}
$
\end{center}

Подумайте, как можно возвести матрицу в $k$-ю степень более эффективно. Рассмотрите случай, когда \texttt{k} явлется степенью двойки и когда не является.



\subsection{Метод Гаусса}
Написать программу, которая бы решала линейную систему уравнений $Ax = b$ методом Гаусса. \\
Главная функция этой программы должна иметь вид: \\ \texttt{void solve\_linear\_system(int n, float A[MAX][MAX], float b[], float x[]).} \\
Программа должна считывать матрицу $A$ размера $n$ на $n$ и столбец $b$ из файла и записывать результат решения $x$ в новый файл. Предполагайте, что детерминант матрицы не равен нулю. Примерный вид вашей программы:
\begin{lstlisting}
#include <stdio.h>
#define MAX 200

// Возможно понадобится вспомогательная функция для перестановки строк матрицы A
void swap_rows(float A[MAX][MAX], int n, int k, int m)
{
    // Ваш код
}

void solve_linear_system(float A[MAX][MAX], int n, float b[], float x[])
{
    // Ваш код
}

int main()
{
    int n;
    float A[MAX][MAX];
    float b[MAX];
    float x[MAX];
    
    // Считываем n, A и b
    solve_linear_system(n, A, b, x);
    // Печатаем x
}
\end{lstlisting}
Проверьте вашу программу на следующих тестах (считывайте из файла методом перенаправления потока): \\
\begin{enumerate}
\item Следующая система:
$$
\begin{cases} 
x_1 + x_2 - x_3 = 9 \\ 
x_2 + 3x_3 = 3 \\ 
-x_1 - 2x_3 = 2 
\end{cases}
$$
Вход для программы должен выглядеть следующим образом:
\begin{lstlisting}
 3
 1 1 -1
 0 1  3
-1 0 -2
9
3
2
\end{lstlisting}
Решение этой системы: $x = \left(\frac{2}{3}, 7, -\frac{4}{3}\right) \approx (0.67, 7.00, -1.33)$
\item Системы из файлов \texttt{system1.txt}, \texttt{system2.txt}, \texttt{system3.txt}. Решения в файлах с именам \texttt{x1.txt}, \texttt{x2.txt}, \texttt{x3.txt} соответственно. Считывайте из файлов методом перенаправления потока.
\end{enumerate}
\end{document}
