\documentclass{article}
\usepackage[utf8x]{inputenc}
\usepackage{ucs}
\usepackage{amsmath} 
\usepackage{amsfonts}
\usepackage{marvosym}
\usepackage{wasysym}
\usepackage{upgreek}
\usepackage[shortlabels]{enumitem}
\usepackage[english,russian]{babel}
\usepackage{graphicx}
\usepackage{float}
\usepackage{textcomp}
\usepackage{hyperref}
\usepackage{geometry}
  \geometry{left=2cm}
  \geometry{right=1.5cm}
  \geometry{top=1cm}
  \geometry{bottom=2cm}
\usepackage{tikz}
\usepackage{ccaption}
\usepackage{multicol}

\hypersetup{
   colorlinks=true,
   citecolor=blue,
   linkcolor=black,
   urlcolor=blue
}

\usepackage{listings}
\usepackage[absolute]{textpos}


\usepackage{colortbl,graphicx,tikz}
\definecolor{X}{rgb}{.5,.5,.5}

\renewcommand{\thesubsection}{\arabic{subsection}}

\begin{document}
\pagenumbering{gobble}
\lstset{
  language=C++,                % choose the language of the code
  basicstyle=\linespread{1.1}\ttfamily,
  columns=fixed,
  fontadjust=true,
  basewidth=0.5em,
  keywordstyle=\color{blue}\bfseries,
  commentstyle=\color{gray},
  stringstyle=\ttfamily\color{orange!50!black},
  showstringspaces=false,
  numbersep=5pt,
  numberstyle=\tiny\color{black},
  numberfirstline=true,
  stepnumber=1,                   % the step between two line-numbers.        
  numbersep=10pt,                  % how far the line-numbers are from the code
  backgroundcolor=\color{white},  % choose the background color. You must add \usepackage{color}
  showstringspaces=false,         % underline spaces within strings
  captionpos=b,                   % sets the caption-position to bottom
  breaklines=true,                % sets automatic line breaking
  breakatwhitespace=true,         % sets if automatic breaks should only happen at whitespace
  xleftmargin=.2in,
  extendedchars=\true,
  keepspaces = true,
}
\lstset{literate=%
   *{0}{{{\color{red!20!violet}0}}}1
    {1}{{{\color{red!20!violet}1}}}1
    {2}{{{\color{red!20!violet}2}}}1
    {3}{{{\color{red!20!violet}3}}}1
    {4}{{{\color{red!20!violet}4}}}1
    {5}{{{\color{red!20!violet}5}}}1
    {6}{{{\color{red!20!violet}6}}}1
    {7}{{{\color{red!20!violet}7}}}1
    {8}{{{\color{red!20!violet}8}}}1
    {9}{{{\color{red!20!violet}9}}}1
}
\newcommand\upquote[1]{\textquotesingle#1\textquotesingle}

\renewcommand{\thesubsection}{\arabic{subsection}}
\makeatletter
\def\@seccntformat#1{\@ifundefined{#1@cntformat}%
   {\csname the#1\endcsname\quad}%    default
   {\csname #1@cntformat\endcsname}}% enable individual control
\newcommand\section@cntformat{}     % section level 
\newcommand\subsection@cntformat{Задача \thesubsection.\space} % subsection level
\newcommand\subsubsection@cntformat{\thesubsubsection.\space} % subsubsection level
\makeatother


\makeatletter
\newcount\my@repeat@count
\newcommand{\myrepeat}[2]{%
  \begingroup
  \my@repeat@count=\z@
  \@whilenum\my@repeat@count<#1\do{#2\advance\my@repeat@count\@ne}%
  \endgroup
}
\makeatother

\title{Домашнее задание \#1: Подключение библиотек. Библиотека raylib.\vspace{-5ex}}\date{}\maketitle
Все задачи нужно решить обязательно с использование только одной сторонней библиотеки -- raylib.


\subsection{Создание библиотек}
В директории \texttt{miptlib} лежит исходный код простой библиотеки с одноимённым названием, состоящей из трёх заголовочных \texttt{.hpp} файлов и трёх файлов исходного кода \texttt{.cpp}. Также там лежит код простейшей программы \texttt{test.cpp} для тестирования библиотеки.

\begin{enumerate}[(a)]
\item Создайте статическую библиотеку из этого исходного кода. То есть файлы \texttt{algebra.cpp}, \texttt{geometry.cpp} и \texttt{statistics.cpp} нужно превратить в один файл статической библиотеки \texttt{libmiptlib.a}.
\item Скомпилируйте программу \texttt{test.cpp}, подключив к ней статическую библиотеку \texttt{libmiptlib.a}.
\item Создайте динамическую библиотеку из изначального исходного кода. То есть файлы \texttt{algebra.cpp}, \texttt{geometry.cpp} и \texttt{statistics.cpp} нужно превратить в один файл динамической библиотеки \texttt{libmiptlib.so}. Используйте флаг \texttt{-fPIC} при компиляции объектных файлов для динамической библиотеки. Если вы на Windows, то динамическая библиотека будет состоять из двух файлов: \texttt{miptlib.dll} и \texttt{miptlib.dll.a}.
\item Скомпилируйте программу \texttt{test.cpp}, подключив к ней динамическую библиотеку. Запустите скомпилированную программу. Библиотека должна подключаться при запуске программы.
\item Измените файл \texttt{test.cpp} так, чтобы библиотека подключалась не при запуске программы, а спустя две секунды после запуска. Используйте \texttt{dlfcn.h}. На Windows эту подзадачу желательно делать, используя компилятор MinGW.
\end{enumerate} 
Для решения этой задачи создайте файлы \texttt{01a.txt}, \texttt{01b.txt}, \texttt{01c.txt}, \texttt{01d.txt} и \texttt{01e.txt}. В которых нужно написать вашу ОС, компилятор, оболочку а также все команды, необходимые для выполнения соответствующей подзадачи. Для подзадачи \texttt{(e)} нужно также добавить файл \texttt{01e\_test.cpp}, содержащий новую версию файла для тестирования.



\subsection{Цикл}
Напишите программу, которая будет рисовать круг, движущийся с постоянной скоростью по горизонтали слева вправо. После того, как круг выходит за границы экрана с правой стороны, он должен появиться с левой стороны.

\subsection{Вращающийся квадрат}
Напишите программу, которая рисует вращающийся квадрат. Квадрат должен вращаться вокруг одной из своих вершин, а не вокруг своего центра.

\subsection{Движение по кругу}
Напишите программу, которая будет рисовать круг, двигающийся по окружности.


\subsection{Координаты мыши}
Напишите программу, которая будет рисовать на экране текст, в котором содержатся координаты мыши в системе координат окна. При изменении положения курсора мыши, текст должен меняться. Используйте функцию \texttt{std::to\_string} для конвертации в строки.

\subsection{Столкновение курсора с прямоугольником}
Напишите программу, которая бы рисовала прямоугольник, цвет которого изменялся бы при наведении на него мышью. Если курсор мыши находится вне прямоугольника, то он должен рисоваться зелёным цветом. Если курсор мыши находится внутри прямоугольника, то красным.

\subsection{Двигающийся кружок}
Напишите программу, которая будет рисовать кружок на экране. Кружок должен перемещаться влево, вправо, вниз и вверх если зажата соответствующая клавиша стрелочек. При нажатии на клавишу пробел кружок должен менять цвет на случайный. Кружок должен менять цвет только в момент нажатия на пробел. Цвет не должен меняться каждый кадр при зажатии клавиши пробел.


\subsection{Притяжение к мыши}
Напишите программу, которая будет рисовать кружок на экране.
При зажатии левой кнопки мыши (ЛКМ), кружок должен начать двигаться к курсору мыши. Решите задачу в двух вариантах:
\begin{enumerate}
\item[a.] Кружок должен двигаться к курсору мыши с постоянной скоростью. Если ЛКМ не зажата, то кружок должен оставаться на месте.
\item[b.] Кружок должен двигаться к курсору мыши с постоянным ускорением. Если ЛКМ не зажата, то кружок должен продолжать двигаться с постоянной скоростью.
\end{enumerate}


\subsection{Создание кругов}
Напишите программу, в которой можно создавать круги по нажатию левой кнопки мыши. При нажатии ЛКМ в определённом месте окна должен появляться круг белого цвета, причём центр круга должен совпадать с положением курсора мыши. При нажатии клавиши пробел цвет всех кругов должен изменяться на случайный.



\subsection{Задача $n$ тел}
В двумерном пространстве находятся $n$ шариков с различными массами и различными электрическими зарядами. Напишите программу, которая будет моделировать движение таких шариков. Шарики не должны двигаться очень медленно; их движение должно быть заметно во все времена симуляции. Движение шариков должно быть одинаково независимо от того, на какой машине программа будет запускаться.
\begin{itemize}
\item Шарики действуют друг на друга силой Кулона:
$$
F  = \frac{q_1 \cdot q_2}{R}
$$
Где $q_{1,2}$ -- заряды шариков, $R$ -- расстояние между шариками. Обратите внимание, что сила взаимодействия обратно пропорциональна первой степени расстояния, а не второй. Это правильная формула для силы Кулона в двух измерениях.

\item Считайте, что силы гравитации между шариками пренебрежимо малы по сравнению с электрическими силами. Их можно не учитывать.

\item Столкновения шариков друг с другом можно тоже не учитывать. Шарики взаимодействуют только посредством силы Кулона.

\item На границах окна поставьте стенки. Шарики должны упруго отскакивать от стенок.

\item Расчёт ускорений, скоростей и положений всех шариков проводите с шагом в длину кадра $\Delta t$. Ограничьте максимальное значение количества кадров в секунду ($fps$) с помощью функции \texttt{SetTargetFPS}. 

\item Если два шарика подойдут слишком близко друг к другу, то сила взаимодействия может стать очень большой. Это приведёт к большой погрешности в вычислениях из-за того, что $\Delta t$ больше характерного времени изменения силы взаимодействия между шариками. В результате этого шарики начнут чрезмерно быстро двигаться. Чтобы исправить этот баг просто сделайте так, чтобы сила взаимодействия шариков была равна нулю, если расстояние между шариками меньше некоторой величины.

\item Начальные значения масс, зарядов, положений шариков задайте случайным образом из некоторых диапазонов. Начальные значения скоростей равны нулю.

\item Цвет шарика должен зависит от его заряда. Положительно заряженные шарики рисуйте красным цветом, а отрицательно заряженные -- синим.

\item Добавьте возможность добавлять шарики, используя мышь. При нажатии левой кнопки мыши, в том месте, где находится курсор, должен создаваться шарик с маленькой массой и с отрицательным зарядом. При нажатии правой кнопки мыши должен создаваться шарик с очень большой  массой и положительным зарядом.
\end{itemize}




\subsection{(*) Столкновения шариков и ломаных}
Напишите программу, в которой можно было бы создавать движущиеся шарики и статичные ломаные. Шарики должны  сталкиваться с краями окна, ломаными и друг с другом. В программе должна быть возможность включать/выключать гравитацию, которая будет действовать на шарики. Также в программе должна быть возможность изменять потери скорости шариков при столкновениях.
В программе нужно реализовать следующие взаимодействия:
\begin{itemize}
\item При нажатии на ЛКМ без зажатого \texttt{LCtrl} должен создаваться шарик радиуса 5 пикселей и со случайными компонентами скорости в диапазоне $[-500, 500]$ пикселей в секунду. Все шарики должны быть одинакового радиуса и одинаковой массы.
\item При нажатии на ЛКМ с зажатым \texttt{LCtrl} можно создавать произвольную ломаную. Пока \texttt{LCtrl} зажат, нужно последовательно выбирать точки ломаной. Сама ломаная при этом отображается серым цветом. После отпускания \texttt{LCtrl} ломаная создаётся и движущиеся шарики теперь могут с ней сталкиваться. В программе можно создать множество различных ломаных.
\item При нажатии на клавишу \texttt{G} должна включаться/выключаться гравитация.
\item При нажатии на клавишу \texttt{W} скорость всех шариков должна увеличиваться на 20\%. При нажатии на клавишу \texttt{S} скорость всех шариков должна уменьшаться на 20\%. 
\item Коэффициент \textit{decay} влияет на уменьшение нормальной компоненты скорости при каждом столкновении шариков с любым препятствием. По умолчанию его значение равно 1 (упругие столкновения). При нажатии на клавиши \texttt{UpArrow}/\texttt{DownArrow} он должен увеличиваться/уменьшаться на 0.01. Коэффициент не должен превышать значения 1.
\item При нажатии на клавишу \texttt{D} должен удаляться последний созданный шарик.
\item При нажатии на клавишу \texttt{F} должна удаляться последняя созданная ломаная.
\item При нажатии на клавишу \texttt{Delete} должны удаляться все шарики и все ломаные.
\end{itemize}



\newpage
\section{Необязательные задачи}
\subsection{Случайные перемещения}
Напишите программу, которая бы рисовала круг, который бы перемещался в случайное место на экране каждые 2 секунды. При этом, все остальное должно работать как прежде, то есть функцию \texttt{sf::sleep} использовать не получится. Используйте классы \texttt{sf::Time} и \texttt{sf::Clock}.


\subsection{Изменение цвета}
Напишите программу, которая бы рисовала круг, цвет которого зависил бы от положения мыши на экране.
Красная компонента цвета круга должна меняться от 0 до 255 при изменении x-компоненты курсора мыши.
Синяя компонента должна меняться от 0 до 255 при изменении y-компоненты курсора мыши.

\subsection{Броуновское движение}
Напишите программу, которая будет моделировать броуновское движение частиц. Представьте каждую частицу в виде шарика, который перемещается на случайное небольшое смещение в случайные моменты времени.


\subsection{Select Move Delete}
 В папке \texttt{select\_move\_delete/} содержится заготовка исходного кода для этого задания. В этой программе есть несколько объектов(кругов), которые можно выделять. Выделение происходит по нажатию левой клавиши мыши. Зажав клавишу \texttt{Ctrl} можно выделить несколько объектов. Также в программе реализован прямоугольник выделения (но он пока не выбирает объекты). Левой кнопкой мыши с зажатой клавишей левый \texttt{Alt} можно создать круг случайного размера. Добавьте следующие возможности в программу:
\begin{itemize}
\item Задание случайного цвета. При нажатии клавиши пробел цвет всех выделенных шаров должен меняться на случайный. Для этого понадобится добавить поле \texttt{color} в класс \texttt{Ball}.

\item Выделение объектов с помощью прямоугольника выделения. Прямоугольник выделения должен рисоваться только если нажатие мыши произошло вне кругов. Все объекты, полностью находящиеся внутри прямоугольника выделения, на момент отпускания левой кнопки мыши должны выделяться. Объекты должны выделяться во время изменения прямоугольника, а не только при отпускании кнопки мыши.

\item Перемещение всех выделенных объектов при зажатии левой клавиши мыши и её движении. Перемещаться должны все выделенные объекты параллельно (также как перемещаются несколько выделенных значков на рабочем столе). Прямоугольник выделения при этом рисоваться не должен.

\item При нажатии клавиши \texttt{Delete}, все выделенные объекты должны удаляться. Чтобы удалить элемент из \texttt{std::list} используйте итераторы и метод \texttt{erase}. При удалении элемента \texttt{std::list} нужно внимательно следить за тем, чтобы не испортить итераторы. Этот момент был более рассмотрен в семинаре \#4.

\item В папке \texttt{../classroom\_tasks\_solutions/context\_menu/} содержится реализация контекстного меню -- класс \texttt{ContextMenu}. Используйте этот класс чтобы добавить контекстное меню в программу. Оно должно открываться при нажатии правой кнопки мыши. Добавьте следующие варианты в меню:
\begin{itemize}
\item \texttt{Delete} - при нажатии на выделенные объект правой кнопкой мыши и выборе этого варианта все выделенные объекты должны удаляться.
\item \texttt{Create} - при нажатии на любое место и выборе этого варианта должнен создаваться новый случайный круг.
\item \texttt{Random Color} -- все выделенные объекты должны окрашиваться в случайный цвет.
\item \texttt{Increase} -- все выделенные объекты должны увеличиваться на 25 процентов.
\item \texttt{Decrease} -- все выделенные объекты должны уменьшаться на 25 процентов.
\end{itemize}

\item \textbf{Copy Paste Cut} Добавьте возможность копирования, вставки и вырезания объектов. Вызов этих операций должен происходить в контекстном меню или с помощью комбинаций клавиш \texttt{Ctrl-C}, \texttt{Ctrl-V} и \texttt{Ctrl-X}.
\end{itemize}






\end{document}